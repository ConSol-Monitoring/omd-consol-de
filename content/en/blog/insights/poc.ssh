lausser@hulse:~$ podman run  -it -p8443:443 --entrypoint bash docker.io/consol/omd-labs-rocky:nightly

[root@7ad62ab6e7b5 ~]# sscg -q \
    --cert-file /etc/pki/tls/certs/localhost.crt \
    --cert-key-file /etc/pki/tls/private/localhost.key \
    --ca-file /etc/pki/tls/certs/localhost.crt \
    --lifetime 365 \
    --hostname localhost \
    --email root@localhost

[root@7ad62ab6e7b5 ~]# /usr/libexec/openssh/sshd-keygen rsa
[root@7ad62ab6e7b5 ~]# /usr/sbin/sshd

[root@7ad62ab6e7b5 ~]# vi /omd/apache/ssh.conf

LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule proxy_wstunnel_module modules/mod_proxy_wstunnel.so
LoadModule rewrite_module modules/mod_rewrite.so

<Location "/ssh">
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/ssh$ ws://localhost:8080/ssh [P,L]
    ProxyPass ws://localhost:8080/ssh retry=0 disablereuse=On
    ProxyPassReverse ws://localhost:8080/ssh
</Location>

[root@7ad62ab6e7b5 ~]# httpd

# server side gost
[root@7ad62ab6e7b5 ~]# gost -DD -L forward+ws://:8080?path=/ssh -F tcp://127.0.0.1:22


# client side gost
lausser@hulse:~$ gost -DD -L tcp://:2222 -F 'forward+wss://localhost:8443?path=/ssh'
lausser@hulse:~$ ssh -p 2222 -l demo localhost 

